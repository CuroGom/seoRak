<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.seoRak.repository.mapper.RankingMapper" >

	<resultMap id="rankMap" type="RankingBookInfo">
		<result column="isbn" property="isbn" />
		<result column="book_title" property="bookTitle" />
		<result column="book_author" property="bookAuthor" />
		<result column="book_publisher" property="bookPublisher" />
		<result column="book_pubDate"   property="bookPubDate"/>
		<result column="book_img" property="bookImg" />
		
		
		
	</resultMap>
	<resultMap id="bestSellerMap" type="RankingInfo">
		<result column="book_title" property="bookTitle"/>
		<result column="bestseller_week" property="bestsellerWeek"/>
		<result column="kyobo_rank" property="kyoboRank"/>
		<result column="aladdin_rank" property="aladdinRank"/>
		<result column="bookpark_rank" property="bookparkRank"/>
		<result column="bandi_rank" property="bandiRank"/>
		<result column="ypbooks_rank" property="ypbooksRank"/>
		<result column="morning24_rank" property="morning24Rank"/>
		<result column="isbn" property="isbn"/>
		<result column="yes24_rank" property="yes24Rank"/>
	</resultMap>
	<insert id="insertRanking" parameterType="RankingBookInfo">
	insert into SEORAK_RANKING_BOOKINFO(
							isbn,
							book_title,
							book_author,
							book_publisher,
							book_img,
							book_pubDate
							
							) 
				values(
					#{isbn},
					 #{bookTitle},
					 #{bookAuthor},
					 #{bookPublisher},
					 #{bookImg},					
					 #{bookPubDate}					 
					   )
					 
	</insert>
	
	<select id="selectIsbn" parameterType="string" resultType="string">
		select isbn
		from SEORAK_RANKING_BOOKINFO
		where isbn = #{isbn}
	</select>
	
	<insert id="insertTotalBestRankyes24" parameterType="RankingInfo">
		insert into SEORAK_RANKING_RANKING(book_title,yes24_rank,isbn,bestseller_week)
				values(#{bookTitle},#{yes24Rank} ,(select isbn from SEORAK_RANKING_BOOKINFO where book_title =#{bookTitle})
				,#{bestsellerWeek})
	
	</insert>
	
	<select id="selectIsbnbyTitle" parameterType="string" resultType="string">
	select isbn
	from SEORAK_RANKING_BOOKINFO
	where book_title = #{bookTitle}
	</select>
	<select id="selectTitle" parameterType="string" resultType="string" >
	select book_title
	from SEORAK_RANKING_BOOKINFO
	where book_title = #{bookTitle}
	</select>
	
	<update id="updateBookRankingkyobo" parameterType="RankingInfo">
	update SEORAK_RANKING_RANKING 
		set kyobo_rank=#{kyboRank}
		
	</update>
	<select id="checkWeekDate" parameterType="date" resultType="date">
	select bestseller_week
	from SEORAK_RANKING_RANKING
	where bestseller_week=#{bestsellerWeek} 
	</select>
	
	
	<select id="seorakRankingtitlecheck" parameterType="string" resultType="string">
	select book_title
	from SEORAK_RANKING_RANKING
	where book_title = #{bookTitle}
	</select>
	
	<update id="updateBookRankingaladdin" parameterType="RankingInfo">
	update SEORAK_RANKING_RANKING 
		set aladdin_rank=#{aladdinRank}
		
	</update>
	
	<update id="updateBookRankingbandi" parameterType="RankingInfo">
	update SEORAK_RANKING_RANKING 
		set bandi_rank=#{bandiRank}
		where book_title = #{bookTitle}
	</update>
	<update id="updateBookRankingbookpark" parameterType="RankingInfo">
	update choi.SEORAK_RANKING_RANKING 
		set bookpark_rank=#{bookparkRank}
	
	</update>
	<update id="updateBookRankingypbooksRank" parameterType="RankingInfo">
	update SEORAK_RANKING_RANKING 
		set ypbooks_rank=#{ypbooksRank}
		
	</update>
	<update id="updateBookRankingmorning24Rank" parameterType="RankingInfo">
	update SEORAK_RANKING_RANKING 
		set morning24_rank=#{morning24Rank}
		
	</update>
	
	<insert id="insertKyoboRanking"  parameterType="RankingInfo">
	insert into SEORAK_RANKING_RANKING(book_title,kyobo_rank,isbn,bestseller_week)
				values(#{bookTitle},#{kyoboRank} ,(select isbn from SEORAK_RANKING_BOOKINFO where book_title =#{bookTitle})
				,#{bestsellerWeek})
	
	</insert>
	<insert id="insertAladdinRanking"  parameterType="RankingInfo">
	insert into SEORAK_RANKING_RANKING(book_title,aladdin_rank,isbn,bestseller_week)
				values(#{bookTitle},#{aladdinRank} ,(select isbn from SEORAK_RANKING_BOOKINFO where book_title =#{bookTitle})
				,#{bestsellerWeek})
	
	</insert>
	
	<insert id="insertBookparkRanking"  parameterType="RankingInfo">
	insert into SEORAK_RANKING_RANKING(book_title,bookpark_rank,isbn,bestseller_week)
				values(#{bookTitle},#{bookparkRank} ,(select isbn from SEORAK_RANKING_BOOKINFO where book_title =#{bookTitle})
				,#{bestsellerWeek})
	
	</insert>
	
	<insert id="insertBandikRanking"  parameterType="RankingInfo">
	insert into SEORAK_RANKING_RANKING(book_title,bandi_rank,isbn,bestseller_week)
				values(#{bookTitle},#{bandiRank} ,(select isbn from SEORAK_RANKING_BOOKINFO where book_title =#{bookTitle})
				,#{bestsellerWeek})
	
	</insert>
	
	<insert id="insertYPRanking"  parameterType="RankingInfo">
	insert into SEORAK_RANKING_RANKING(book_title,ypbooks_rank,isbn,bestseller_week)
				values(#{bookTitle},#{ypbooksRank} ,(select isbn from SEORAK_RANKING_BOOKINFO where book_title =#{bookTitle})
				,#{bestsellerWeek})
	
	</insert>
	
	<insert id="insertMorining24Ranking"  parameterType="RankingInfo">
	insert into SEORAK_RANKING_RANKING(book_title,morning24_rank,isbn,bestseller_week)
				values(#{bookTitle},#{morning24Rank} ,(select isbn from SEORAK_RANKING_BOOKINFO where book_title =#{bookTitle})
				,#{bestsellerWeek})
	
	</insert>
	<select id="RankingTitleCheck" parameterType="RankingInfo" resultType="string">
	select book_title
	from SEORAK_RANKING_RANKING
	where book_title = #{bookTitle}
	</select>
</mapper>